# **üìÑ ProjectManagementPF - Gesti√≥n de Productos con Django**

Una aplicaci√≥n web basada en Django para la gesti√≥n de productos con categor√≠as, im√°genes y una interfaz responsiva gracias a Bootstrap. Sigue buenas pr√°cticas de estructura, control de versiones, pruebas, documentaci√≥n y despliegue continuo.

üîó¬†**App en vivo:**¬†[https://projectmanagementpf.onrender.com](https://projectmanagementpf.onrender.com)¬†üõ†¬†\*\*CI/CD:\*\*GitHub Actions (pruebas con PostgreSQL) üìÖ¬†**√öltima actualizaci√≥n:**¬†2025-06-22 üë•¬†**Equipo:**¬†`TeamLeadGPT`¬†‚Äì Senior Dev & Tech PM

---

## **üìÇ Estructura de Carpetas y Archivos**

```
ProjectManagementPF/
‚îú‚îÄ‚îÄ .github/                        # Configuraciones de GitHub (workflows, PR templates, etc.)
‚îú‚îÄ‚îÄ config/                         # Configuraci√≥n global del proyecto Django
‚îú‚îÄ‚îÄ core/                           # App principal para vistas generales y p√°gina de inicio
‚îÇ   ‚îú‚îÄ‚îÄ migrations/                 # Migraciones de base de datos para core
‚îÇ   ‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ core/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ home.html          # P√°gina principal del sitio
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ admin.py
‚îÇ   ‚îú‚îÄ‚îÄ apps.py
‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îú‚îÄ‚îÄ tests.py
‚îÇ   ‚îú‚îÄ‚îÄ urls.py
‚îÇ   ‚îî‚îÄ‚îÄ views.py
‚îú‚îÄ‚îÄ fixtures/                      # Datos de prueba en formato JSON
‚îú‚îÄ‚îÄ htmlcov/                       # Reportes de cobertura de pruebas
‚îú‚îÄ‚îÄ libretranslate/                # Integraci√≥n o cliente para traducci√≥n de textos
‚îú‚îÄ‚îÄ locale/                        # Archivos de internacionalizaci√≥n (i18n)
‚îÇ   ‚îî‚îÄ‚îÄ es/
‚îÇ       ‚îî‚îÄ‚îÄ LC_MESSAGES/
‚îÇ           ‚îú‚îÄ‚îÄ django.po         # Archivo de traducci√≥n editable (mensajes en espa√±ol)
‚îÇ           ‚îî‚îÄ‚îÄ django.mo         # Archivo compilado para uso por Django
‚îú‚îÄ‚îÄ media/                         # Archivos multimedia subidos por usuarios (productos)
‚îú‚îÄ‚îÄ orders/                        # App para gestionar pedidos de usuarios
‚îÇ   ‚îú‚îÄ‚îÄ migrations/                # Migraciones de base de datos para orders
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ admin.py                   # Panel de administraci√≥n para pedidos y items
‚îÇ   ‚îú‚îÄ‚îÄ apps.py                    # Configuraci√≥n y verbose_name traducible
‚îÇ   ‚îú‚îÄ‚îÄ forms.py                   # Formularios personalizados (ej. OrderItemInlineForm)
‚îÇ   ‚îú‚îÄ‚îÄ models.py                  # Modelos: Order y OrderItem, soporte multiidioma
‚îÇ   ‚îú‚îÄ‚îÄ tests.py                   # Pruebas unitarias para pedidos
‚îÇ   ‚îî‚îÄ‚îÄ views.py                   # Vistas (pr√≥ximamente: historial, detalle, gesti√≥n)
‚îú‚îÄ‚îÄ products/                      # App principal para la gesti√≥n de productos y categor√≠as
‚îÇ   ‚îú‚îÄ‚îÄ migrations/                # Migraciones de base de datos para products
‚îÇ   ‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ products/             # Archivos est√°ticos espec√≠ficos de productos (CSS, JS, im√°genes)
‚îÇ   ‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ products/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ _product-card.html # Partial: tarjeta para vista en cuadr√≠cula
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ product-detail.html # Detalle de un producto individual
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ product-list.html # Listado de productos
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ admin.py                  # Registro de modelos en panel de administraci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ apps.py                   # Configuraci√≥n de la app, incluye verbose_name traducible
‚îÇ   ‚îú‚îÄ‚îÄ models.py                 # Modelos de producto y categor√≠a
‚îÇ   ‚îú‚îÄ‚îÄ tests.py                  # Pruebas unitarias de productos
‚îÇ   ‚îú‚îÄ‚îÄ translation.py            # Configuraci√≥n de traducci√≥n para campos de modelo
‚îÇ   ‚îú‚îÄ‚îÄ urls.py                   # Rutas de productos (lista y detalle)
‚îÇ   ‚îî‚îÄ‚îÄ views.py                  # Vistas basadas en clase para productos
‚îú‚îÄ‚îÄ static/                       # Archivos est√°ticos globales (CSS, JS, img)
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ product.css           # Estilos personalizados para productos
‚îÇ   ‚îú‚îÄ‚îÄ img/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ defaults/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ no-image-available.png # Imagen por defecto si no hay imagen del producto
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ favicon.ico           # Icono del sitio web
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logo.png              # Logotipo principal del sitio
‚îú‚îÄ‚îÄ staticfiles/                  # Carpeta generada para deploy (collectstatic)
‚îú‚îÄ‚îÄ templates/                    # Plantillas HTML globales
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ footer.html           # Pie de p√°gina reutilizable
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ messages.html         # Mensajes del sistema (√©xito, error, etc.)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ navbar.html           # Barra de navegaci√≥n principal
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ base.html             # Plantilla base principal del sitio
‚îú‚îÄ‚îÄ users/                        # App para gesti√≥n de usuarios (login, perfiles, etc.)
‚îÇ   ‚îú‚îÄ‚îÄ migrations/               # Migraciones de base de datos para users
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ admin.py                  # Administraci√≥n del modelo CustomUser en el panel admin
‚îÇ   ‚îú‚îÄ‚îÄ apps.py                   # Configuraci√≥n y verbose_name traducible de la app
‚îÇ   ‚îú‚îÄ‚îÄ managers.py               # Manager personalizado para crear usuarios y superusuarios
‚îÇ   ‚îú‚îÄ‚îÄ models.py                 # Modelo CustomUser basado en AbstractBaseUser
‚îÇ   ‚îú‚îÄ‚îÄ tests.py                  # Pruebas unitarias relacionadas con usuarios
‚îÇ   ‚îî‚îÄ‚îÄ views.py                  # Vistas para funcionalidades de usuario
‚îú‚îÄ‚îÄ utils/                        # Funciones auxiliares o servicios comunes
‚îú‚îÄ‚îÄ .coverage                     # Archivo de cobertura de pruebas
‚îú‚îÄ‚îÄ .env                          # Variables de entorno (Django secret, DB, etc.)
‚îú‚îÄ‚îÄ .gitignore                    # Archivos ignorados por Git
‚îú‚îÄ‚îÄ db.sqlite3                    # Base de datos local SQLite
‚îú‚îÄ‚îÄ Django_secret_key_for_render # Clave secreta usada en despliegue con Render
‚îú‚îÄ‚îÄ identifier.sqlite             # Posible BD auxiliar (traducciones o tests)
‚îú‚îÄ‚îÄ manage.py                     # Comando principal para gestionar Django
‚îú‚îÄ‚îÄ README.md                     # Documentaci√≥n inicial del proyecto
‚îú‚îÄ‚îÄ requirements.txt              # Dependencias del proyecto
‚îú‚îÄ‚îÄ tareas_semanales.md           # Planificaci√≥n de tareas y progreso
‚îî‚îÄ‚îÄ translate_data.py             # Script para traducir datos utilizando libretranslate
```


---

### üõ†Ô∏è Personalizaciones importantes en `config/settings.py`

Este informe resume cuidadosamente todas las configuraciones personalizadas o adaptadas en el archivo `settings.py` del proyecto, m√°s all√° de la configuraci√≥n por defecto generada por Django.

---

#### üîê Seguridad y entorno

- \*\*Claves sensibles desde \*\*\`\`:
  ```
  from decouple import config
  SECRET_KEY = config('SECRET_KEY', default='django-insecure-default-key')
  DEBUG = config('DEBUG', default=False, cast=bool)
  ALLOWED_HOSTS = config('ALLOWED_HOSTS', default='localhost,127.0.0.1', cast=lambda v: [s.strip() for s in v.split(',')])

  ```
  > Se utiliza `python-decouple` para proteger datos sensibles mediante variables de entorno. Esto facilita el cambio entre entornos local y producci√≥n.

---

#### üìä Logging personalizado

- **Sistema de ****\`\`**** avanzado activado**:
  ```
  LOGGING = {
      'version': 1,
      'handlers': {
          'console': {
              'class': 'logging.StreamHandler',
              'stream': sys.stdout,
              'formatter': 'verbose',
          },
      },
      'formatters': {
          'verbose': {
              'format': '[%(asctime)s] %(levelname)s [%(name)s] %(message)s'
          },
      },
      'root': {
          'handlers': ['console'],
          'level': 'DEBUG',
      },
  }

  ```
  > Se activan logs detallados por consola, √∫tiles para depurar durante el desarrollo.

---

#### üóÉÔ∏è Base de datos condicional (PostgreSQL o SQLite)

- **Conmutaci√≥n din√°mica entre SQLite y PostgreSQL**:
  ```
  USE_POSTGRES = config('USE_POSTGRES', default=False, cast=bool)

  ```
  Si `USE_POSTGRES=True` se cargan par√°metros desde `.env` para PostgreSQL, de lo contrario se utiliza SQLite local.

---

#### üë§ Usuario personalizado

- **Uso de modelo de usuario propio**:
  ```
  AUTH_USER_MODEL = 'users.CustomUser'

  ```
  El modelo de usuario ha sido redefinido para permitir autenticaci√≥n basada en email y m√°s control sobre los campos.

---

#### üåç Internacionalizaci√≥n (i18n)

- **Idioma por defecto y soporte multiling√ºe**:
  ```
  LANGUAGE_CODE = 'en-en'
  LANGUAGES = (
      ('en', 'English'),
      ('es', 'Spanish'),
  )
  LOCALE_PATHS = [ BASE_DIR / 'locale' ]
  MIDDLEWARE += ['django.middleware.locale.LocaleMiddleware']

  ```
  > Se ha activado el sistema de traducciones de Django para manejar m√∫ltiples idiomas en el sitio web.

---

#### üß© Aplicaciones instaladas (INSTALLED\_APPS)

Incluye:

- `modeltranslation`: traducci√≥n autom√°tica de campos en modelos.
- `products.apps.ProductsConfig`: configuraci√≥n personalizada con `verbose_name`, `ready()` y traducciones.
- `users`: con `CustomUser`.
- `orders`, `core`: apps personalizadas del proyecto.

---

#### ‚öôÔ∏è Middleware extra

- `whitenoise.middleware.WhiteNoiseMiddleware`: para servir archivos est√°ticos comprimidos en producci√≥n.
- `django.middleware.locale.LocaleMiddleware`: activa idioma seg√∫n preferencia del navegador del usuario.

---

#### üìÅ Archivos est√°ticos y medios

- **Configuraci√≥n clara y adaptada al despliegue**:
  ```
  STATIC_URL = '/static/'
  STATICFILES_DIRS = [BASE_DIR / 'static']
  STATIC_ROOT = BASE_DIR / 'staticfiles'

  MEDIA_URL = '/media/'
  MEDIA_ROOT = os.path.join(BASE_DIR, 'media')

  STATICFILES_STORAGE = 'whitenoise.storage.CompressedManifestStaticFilesStorage'

  ```
  > Se configura `WhiteNoise` para servir archivos est√°ticos comprimidos y versionados.

---

#### üß± TEMPLATES: Procesadores personalizados

- Se incluye `core.context_processors.global_categories`, lo que sugiere que las categor√≠as de productos se cargan globalmente en los templates.

---

#### üîë Primary key personalizada

- Uso de campos `BigAutoField` por defecto:
  ```
  DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'

  ```
  > Ideal para bases de datos grandes, previene desbordamiento de claves primarias.

---

¬øDeseas extender este informe incluyendo el bloque de `TEMPLATES`, validadores de contrase√±a o configuraci√≥n WSGI? Puedo a√±adirlo si quieres documentar al m√°ximo esta configuraci√≥n.



# üì¶Aplicaciones y funcionalidades 


##  Actualizaci√≥n de desarrollo: Gesti√≥n de Pedidos (`orders`) en Django



---

## üü¢ Resumen de mejoras implementadas

Durante esta jornada se han introducido optimizaciones clave en la app `orders` enfocadas en:

- La definici√≥n de modelos robustos y multilanguage.
- Un panel de administraci√≥n seguro y c√≥modo.
- Control granular de permisos y edici√≥n.
- Mejoras UX para la gesti√≥n de productos en cada pedido.

---

### üîß Modelos y migraciones
- Se han definido los modelos `Order` y `OrderItem` con soporte para multiidioma (`gettext_lazy`).
- M√©todos auxiliares como `get_total()` para pedidos y `get_total_price()` para cada item.
- Se gestion√≥ la rama `feature/orders` y se integraron migraciones iniciales controladas.

### üõ°Ô∏è Panel de administraci√≥n
- Se registraron ambos modelos y se personaliz√≥ la presentaci√≥n con columnas y filtros √∫tiles.
- Se implement√≥ el filtrado y traducci√≥n del estado de cada pedido.

### üöÄ Git y flujo de trabajo
- Se limpiaron los commits hist√≥ricos.
- Se estructur√≥ la rama de trabajo y el flujo de versiones (naming y PRs).

---

## üí° Optimizaci√≥n de usabilidad en el admin

### Problemas identificados
- El selector de producto en los `OrderItem` era poco informativo.

### Soluci√≥n aplicada
- Se personaliz√≥ el `OrderItemInline` mediante un formulario que muestra: `Nombre (ID, Categor√≠a)`.
- El desplegable de productos ahora es mucho m√°s claro y pr√°ctico para el administrador.

### Siguiente nivel (propuesto)
- A√±adir filtrado din√°mico por categor√≠a (campos encadenados tipo smart-selects).

---

## ‚öôÔ∏è Control de permisos y edici√≥n avanzada

- El campo **usuario** del pedido es siempre solo lectura (tanto creaci√≥n como edici√≥n).
- El campo **status** siempre editable, para permitir avanzar el estado desde el admin.
- Los **OrderItems** solo son editables si el pedido est√° pendiente; en cualquier otro estado son solo lectura (ni a√±adir, ni modificar, ni borrar).
- La l√≥gica del admin garantiza que cualquier pedido es accesible (puede verse y auditarse), pero solo los pendientes se pueden modificar.

### Extracto del c√≥digo implementado

```python
class OrderItemInline(admin.TabularInline):
    model = OrderItem
    extra = 0

class ReadOnlyOrderItemInline(admin.TabularInline):
    model = OrderItem
    can_delete = False
    extra = 0
    readonly_fields = ('product', 'quantity', 'price')
    def has_add_permission(self, request, obj=None): return False
    def has_change_permission(self, request, obj=None): return False
    def has_delete_permission(self, request, obj=None): return False

@admin.register(Order)
class OrderAdmin(admin.ModelAdmin):
    list_display = ('id', 'user', 'status', 'created_at', 'calculated_total')
    list_filter  = ('status', 'created_at')
    search_fields = ('user__email',)
    def get_inline_instances(self, request, obj=None):
        if obj and obj.status != 'pendiente':
            return [ReadOnlyOrderItemInline(self.model, self.admin_site)]
        return [OrderItemInline(self.model, self.admin_site)]
    def get_readonly_fields(self, request, obj=None):
        return ('user', 'transaction_id', 'created_at')
    def has_change_permission(self, request, obj=None):
        return True
```

---

## üèÅ Resultado final
- Gesti√≥n profesional y segura de pedidos en el admin.
- Menos errores humanos y m√°xima trazabilidad.
- UX mejorada para los usuarios responsables de pedidos.
- Base s√≥lida para a√±adir vistas y funcionalidades p√∫blicas/privadas en pr√≥ximos sprints.




## **üìä M√≥dulos y Bibliotecas y paquetes**

### üì¶ Dependencias del proyecto (`requirements.txt`)

A continuaci√≥n se describen los paquetes instalados hasta ahora para el desarrollo, prueba, despliegue y funcionamiento general del proyecto:

#### üß± N√∫cleo del framework

- **Django==5.2.3**: Framework principal del proyecto. Permite la creaci√≥n de modelos, vistas, rutas, sistema de autenticaci√≥n y panel de administraci√≥n.
- **asgiref==3.8.1**: Componente esencial para el soporte de ASGI en Django, habilita funcionalidades as√≠ncronas.
- **sqlparse==0.5.3**: Analizador y formateador de sentencias SQL, utilizado internamente por Django.

#### üåç Internacionalizaci√≥n y traducci√≥n

- **django-modeltranslation==0.19.16**: Permite traducir din√°micamente los campos de los modelos a m√∫ltiples idiomas, integr√°ndose con el admin.

#### üåê Cliente HTTP y dependencias relacionadas

- **requests==2.32.4**: Biblioteca HTTP robusta para consumir APIs externas como LibreTranslate.
- **certifi==2025.7.14**: Certificados ra√≠z utilizados para validar conexiones HTTPS seguras.
- **charset-normalizer==3.4.2**: Detecta y normaliza codificaciones de texto en respuestas HTTP.
- **idna==3.10**: Soporte para dominios internacionalizados en URLs.
- **urllib3==2.5.0**: Cliente HTTP de bajo nivel, utilizado internamente por `requests`.

#### üñºÔ∏è Multimedia y archivos

- **pillow==11.2.1**: Biblioteca de manipulaci√≥n de im√°genes en Python. Se usa para campos `ImageField` en productos.

#### üß™ Testing y calidad de c√≥digo

- **coverage==7.9.1**: Herramienta para medir el porcentaje de c√≥digo cubierto por pruebas unitarias.

#### üîê Configuraci√≥n y entorno

- **python-decouple==3.8**: Separa par√°metros de configuraci√≥n del c√≥digo fuente mediante archivos `.env`, mejorando la seguridad y la portabilidad.
- **packaging==25.0**: Utilidad para manejar versiones y comparaciones de paquetes. Dependencia auxiliar.

#### üöÄ Despliegue en producci√≥n

- **gunicorn==23.0.0**: Servidor WSGI ligero y eficiente para ejecutar Django en producci√≥n.
- **psycopg2-binary==2.9.10**: Adaptador de base de datos PostgreSQL requerido para producci√≥n y CI.
- **whitenoise==6.9.0**: Middleware que permite servir archivos est√°ticos directamente desde Django, √∫til cuando no hay un servidor como Nginx.

> Todos estos paquetes est√°n definidos con versi√≥n fija para asegurar reproducibilidad entre entornos de desarrollo, CI y despliegue.

##

### **‚ôªÔ∏è Backend**

- **Django**: Framework principal para desarrollo web.



### üåê Traducci√≥n con gettext / locale

Se utiliz√≥ el sistema est√°ndar de traducci√≥n de Django mediante `gettext` y la estructura `locale/`, que permite internacionalizar textos en la aplicaci√≥n de forma limpia y modular.

Los archivos de idioma se almacenan en la siguiente estructura de carpetas:

```
locale/
‚îî‚îÄ‚îÄ es/
    ‚îî‚îÄ‚îÄ LC_MESSAGES/
        ‚îú‚îÄ‚îÄ django.po   # Archivo fuente con traducciones editables
        ‚îî‚îÄ‚îÄ django.mo   # Archivo compilado que Django utiliza
```

El archivo `.po` se edita manualmente con los textos traducidos, y luego se compila al formato `.mo` mediante el comando `django-admin compilemessages`, necesario para que Django lo utilice en tiempo de ejecuci√≥n.

-
  - Comandos para gestionar las traducciones:
  - Generar archivo con todos los textos marcados para traducci√≥n:¬†`django-admin makemessages -l es`
  - Compilar las traducciones al archivo¬†`.mo`¬†(obligatorio para que Django las use):¬†`django-admin compilemessages`
- **modeltranslation**: Se emplea para traducir din√°micamente campos de modelos (`name`,¬†`description`¬†en¬†`Product`¬†y¬†`Category`). La configuraci√≥n se encuentra en¬†`products/translation.py`, y se registra autom√°ticamente en¬†`apps.py`¬†mediante¬†`import products.translation`¬†en el m√©todo¬†`ready()`.
- **libretranslate**: API externa para traducci√≥n autom√°tica de contenidos din√°micos o scripts de utilidad (`translate_data.py`).

### **üîß Herramientas y desarrollo**

- **Git**: Control de versiones con flujo de trabajo por ramas (`main`,¬†`develop`,¬†`feature/*`).
- **GitHub**: Alojamiento del repo y revisi√≥n de Pull Requests.
- **unittest**: Pruebas unitarias.
- **coverage**: Generaci√≥n de reportes de cobertura de tests.
- **GitHub Actions**: CI automatizada para tests con PostgreSQL.
- **python-decouple**: Para manejo seguro de variables de entorno.

### **üåê Frontend**

- **Bootstrap**: Framework CSS responsivo.
- **FontAwesome**: Iconos vectoriales.
-

### **üîß Otros**

- **dotenv**: Uso de¬†`.env`¬†para variables sensibles.
- **faker**¬†(plan futuro): Generaci√≥n de datos de prueba.
- **gunicorn, psycopg2**: Despliegue en Render con PostgreSQL.

---

## **4. Documentar archivos**

### Archivo: `.env`

Contiene variables de entorno sensibles y de configuraci√≥n, usadas tanto en desarrollo local como en producci√≥n (por ejemplo, cuando se despliega en Render). Estas variables permiten definir el comportamiento de la aplicaci√≥n sin exponer datos directamente en el c√≥digo fuente.

Incluye configuraciones como:

- Activaci√≥n o desactivaci√≥n del uso de PostgreSQL.
- Habilitaci√≥n del modo `DEBUG` en entornos de desarrollo.
- Datos de conexi√≥n para la base de datos PostgreSQL: nombre de base de datos, usuario, contrase√±a, host y puerto.
- La clave secreta (`SECRET_KEY`) necesaria para la seguridad interna de Django.

Es importante mantener este archivo fuera del control de versiones para evitar exponer datos sensibles.

### Archivo: `manage.py`

Script principal para gestionar tareas administrativas en proyectos Django. Permite ejecutar comandos como iniciar el servidor de desarrollo, crear migraciones, interactuar con la base de datos o ejecutar pruebas. Es el punto de entrada para casi todas las operaciones del framework durante el desarrollo y despliegue.

### Archivo: `requirements.txt`

Archivo de texto que lista todas las dependencias Python necesarias para ejecutar el proyecto. Facilita la instalaci√≥n r√°pida y consistente de los paquetes requeridos mediante el comando:

```
pip install -r requirements.txt

```

Es fundamental tanto para desarrolladores como para servidores de despliegue automatizado.

### Archivo: `.gitignore`

Determina qu√© archivos y carpetas deben ser ignorados por Git en el control de versiones. Normalmente incluye entornos virtuales, archivos de configuraci√≥n sensibles como `.env` y carpetas generadas autom√°ticamente (como `__pycache__` o `staticfiles/`).

### Archivo: `Django_secret_key_for_render`

Archivo auxiliar que almacena la clave secreta utilizada por Django cuando se despliega el proyecto en la plataforma Render. Separa la administraci√≥n de credenciales de desarrollo local y producci√≥n, reforzando la seguridad y el control de acceso.

### Archivo: `README.md`

Documento principal de presentaci√≥n del proyecto. Explica brevemente el objetivo de la aplicaci√≥n, gu√≠a su instalaci√≥n, describe funcionalidades b√°sicas y proporciona referencias a recursos adicionales y a la estructura del proyecto.

### Archivo: `tareas_semanales.md`

Registro planificado de tareas, avances y pendientes, organizado por semanas o ciclos. √ötil para dar seguimiento a la evoluci√≥n del proyecto, asignar responsabilidades y mantener productividad dentro del equipo.

### Archivo: `translate_data.py`

Script utilizado para traducir datos existentes en el proyecto, probablemente mediante la integraci√≥n del cliente LibreTranslate. Automatiza la actualizaci√≥n de contenidos en m√∫ltiples idiomas, ayudando a mantener la internacionalizaci√≥n sincronizada.

\
**‚úÖ Logros Clave**

| **FechaActividad** |                                                                                                                 |
| ------------------ | --------------------------------------------------------------------------------------------------------------- |
| **D√≠a 1**          | Configuraci√≥n del proyecto, modelos¬†`Product`¬†y¬†`Category`, estructura de apps.                                 |
| **D√≠a 2**          | Pruebas unitarias para¬†`ProductListView`¬†(5 tests), correcci√≥n de paginaci√≥n con¬†`.order_by("name")`.           |
| **D√≠a 3**          | Configuraci√≥n de¬†**GitHub Actions**¬†con PostgreSQL, manejo de secretos con¬†`python-decouple`, 95% de cobertura. |
| **D√≠a 4**          | Despliegue en¬†**Render**, soluci√≥n de errores de est√°ticos (`collectstatic`), favicon,¬†`gunicorn`,¬†`psycopg2`.  |
| **D√≠a 5+**         | Internacionalizaci√≥n, traducci√≥n de modelos, integraci√≥n con LibreTranslate, documentaci√≥n.                     |

---

## **üîÑ Flujo de Desarrollo y Git**

- **Ramas**:
  - `main`: Producci√≥n (protegida).
  - `develop`: Integraci√≥n.
  - `feature/*`: Nuevas funcionalidades.
- **Flujo**:
  1. Crear rama¬†`feature/xxx`.
  2. Hacer commits con mensajes claros (`test:`,¬†`fix:`,¬†`feat:`).
  3. Abrir PR a¬†`develop`.
  4. CI ejecuta pruebas.
  5. Revisi√≥n ‚Üí Merge ‚Üí Despliegue.

---

## **üö® Desaf√≠os Resueltos**

| **ProblemaSoluci√≥n**              |                                                                         |
| --------------------------------- | ----------------------------------------------------------------------- |
| Paginaci√≥n inconsistente en tests | A√±adir¬†`.order_by("name")`¬†en la vista.                                 |
| Favicon no se mostraba            | Colocado en¬†`static/img/favicon.ico`¬†y referenciado con¬†`{% static %}`. |
| GitHub Actions fallaba con DB     | Usar servicio PostgreSQL + variables correctas.                         |
| App crasheaba en Render           | Instalar¬†`gunicorn`¬†y¬†`psycopg2`¬†en¬†`requirements.txt`.                 |
| Est√°ticos no cargaban             | Configurar¬†`STATIC_ROOT`¬†y ejecutar¬†`collectstatic`.                    |

---

## **üö® Extras**

### üó®Ô∏è Script: `translate_data.py`

Este script permite traducir din√°micamente los campos de texto de los modelos `Product` y `Category` desde ingl√©s a espa√±ol utilizando la API de **LibreTranslate**.

#### üîß Funcionamiento general

- Utiliza la librer√≠a `requests` para realizar peticiones POST a un endpoint local (`http://localhost:5000/translate`), que se asume corresponde a una instancia de LibreTranslate en ejecuci√≥n.
- Traduce el contenido del campo `name` y `description` si no existen versiones ya traducidas (`name_es`, `description_es`).
- Guarda los cambios en la base de datos tras realizar cada traducci√≥n.
- Muestra por consola los textos traducidos para seguimiento.

#### üß† Funci√≥n principal

```
def translate_text(text, target_lang='es'):
    # Realiza la llamada a la API de traducci√≥n

```

- Se asegura de no traducir textos vac√≠os.
- Controla errores de red mediante `try-except`.

#### üì¶ Dependencias necesarias

- El script requiere tener `requests` instalado.
- Supone que el proyecto tiene definidos campos como `name_en`, `name_es`, `description_en`, `description_es` en los modelos involucrados.

#### üìçUbicaci√≥n prevista

- Se encuentra ubicado en la ra√≠z del proyecto o en una carpeta de utilidades (`/translate_data.py`, `/utils/translate_data.py`).

> Es √∫til para prellenar campos traducidos en bases de datos iniciales o tras incorporar nuevos registros no traducidos autom√°ticamente.



### üê≥ Archivo: `docker-compose.yml`

Este archivo define un servicio Docker llamado **LibreTranslate**, que proporciona un servidor de traducci√≥n autom√°tica compatible con peticiones HTTP. Est√° dise√±ado para ejecutarse de forma local y facilitar la integraci√≥n con proyectos como este, donde se requiere traducir contenido din√°mico de la base de datos (por ejemplo, productos o categor√≠as).

#### ‚öôÔ∏è Configuraci√≥n del servicio

- \`\`: Nombre asignado al contenedor.
- \`\`: Imagen oficial de Docker desde Docker Hub.
- \`\`: Asegura que el contenedor se reinicie autom√°ticamente salvo que se detenga manualmente.
- \`\`: Expone el puerto interno del servicio para que est√© accesible localmente v√≠a `http://localhost:5000`.

#### üåê Variables de entorno utilizadas

- `LT_LOAD_ONLY=en,es`: Solo se cargan los modelos de ingl√©s y espa√±ol (optimiza uso de recursos).
- `LT_UPDATE_MODELS=true`: Fuerza la actualizaci√≥n de los modelos de traducci√≥n al iniciar.
- `LT_THREADS=2`: Define el n√∫mero de hilos (optimizado para Mac M1).
- `LT_FRONTEND_TIMEOUT=2000`: Configura el tiempo de espera para la interfaz.

#### üì¶ Vol√∫menes y persistencia

- `libretranslate_models:/home/libretranslate/.local:rw`: Monta un volumen para guardar los modelos localmente y evitar tener que descargarlos en cada reinicio.

#### ‚ù§Ô∏è Healthcheck

Verifica que el contenedor est√© funcionando correctamente ejecutando un script de chequeo de salud cada 30 segundos. Si falla 3 veces, se considera no saludable.

---

### ‚ñ∂Ô∏è Comandos para ejecutar el servicio

1. **Crear el archivo** `docker-compose.yml` en la ra√≠z del proyecto o en una carpeta como `docker/`.
2. **Levantar el servicio**:

```
docker compose up -d

```

3. **Verificar que el contenedor est√© en ejecuci√≥n**:

```
docker ps

```

4. **Detener el contenedor** (cuando ya no se necesita):

```
docker compose down

```

---

> Este contenedor debe estar ejecut√°ndose para que el script `translate_data.py` pueda conectarse correctamente a `http://localhost:5000/translate` y traducir los datos desde el backend.



### üß∞ Herramientas utilizadas



Listado de utilidades t√©cnicas integradas en el entorno de desarrollo del proyecto:

- \*\*üß™ \*\*\`\`: Herramienta para medir la cobertura de c√≥digo al ejecutar pruebas automatizadas. (Documentado abajo)
- \*\*üê≥ \*\*\`\`: Para levantar servicios como LibreTranslate en contenedores.
- \*\*üì¶ \*\*\`\`: Gesti√≥n segura de variables de entorno a trav√©s de archivos `.env`.
- \*\*üî§ \*\*\`\`: Traducci√≥n autom√°tica de campos de modelos a m√∫ltiples idiomas.
- \*\*üåê \*\*\`\`: Cliente HTTP para consumir APIs externas como LibreTranslate.
- \*\*üì∏ \*\*\`\`: Procesamiento de im√°genes (usado con `ImageField` en productos).
- \*\*üåÄ \*\*\`\`: Middleware para servir archivos est√°ticos en despliegues sin servidor web.
- \*\*üöÄ \*\*\`\`: Servidor WSGI para producci√≥n.
- \*\*üêò \*\*\`\`: Adaptador PostgreSQL para Django.



### üíæ Uso de Fixtures y `inicial.json`

‚úÖ **Las fixtures son una funcionalidad nativa de Django**, incluida directamente en el framework.

Los comandos `dumpdata` y `loaddata` forman parte del sistema de gesti√≥n de datos de Django y vienen listos para usarse.

Django permite cargar datos iniciales en la base de datos mediante **fixtures**, que son archivos estructurados (normalmente en formato JSON) con datos serializados de modelos.

#### üìÅ Archivo: `inicial.json`

Este archivo act√∫a como una fixture personalizada del proyecto. Suele contener datos predefinidos necesarios para que la aplicaci√≥n funcione correctamente desde su primer arranque, como categor√≠as, productos, usuarios de ejemplo, o configuraciones b√°sicas.

#### üõ†Ô∏è ¬øC√≥mo se usa?

- Los datos deben exportarse previamente con el comando:

```
python manage.py dumpdata products --indent 2 > inicial.json

```

- Para cargarlo en la base de datos:

```
python manage.py loaddata inicial.json

```

#### üìå Ubicaci√≥n habitual

Puede almacenarse en la ra√≠z del proyecto, o dentro de una carpeta como `fixtures/` o dentro de cada app.

#### üìã Ejemplo de contenido

```
[
  {
    "model": "products.category",
    "pk": 1,
    "fields": {
      "name": "Juegos de mesa",
      "name_en": "Board Games",
      "name_es": "Juegos de mesa"
    }
  }
]

```

> Este mecanismo es √∫til para entornos de desarrollo, pruebas automatizadas, o incluso para iniciar contenido b√°sico tras un despliegue en producci√≥n.



### üß™ Herramienta: `coverage`

\`\` es una herramienta de an√°lisis que mide qu√© partes del c√≥digo fuente han sido ejecutadas al correr los **tests automatizados** del proyecto. Su objetivo principal es mejorar la calidad del software asegurando que el c√≥digo est√© bien probado.

---

### üéØ ¬øPara qu√© sirve?

- Detectar funciones o bloques de c√≥digo que nunca se ejecutan.
- Verificar que las pruebas cubren todos los comportamientos esperados.
- Eliminar c√≥digo muerto o innecesario.
- Establecer m√©tricas de calidad en procesos de integraci√≥n continua (CI).

---

### ‚öôÔ∏è ¬øPor qu√© se instal√≥?

Se incluy√≥ `coverage==7.9.1` en el archivo `requirements.txt` durante la fase de desarrollo para:

- Evaluar objetivamente la cobertura de las pruebas unitarias.
- Integrar su uso en CI (GitHub Actions).
- Obtener informes visuales y por consola sobre la calidad de los tests.
- Alcanzar un objetivo de cobertura (se document√≥ que se lleg√≥ al 95%).

---

### üìÇ ¬øQu√© es la carpeta `htmlcov/`?

Al ejecutar `coverage html`, se genera un informe visual en formato HTML dentro de una carpeta llamada `htmlcov/`. Este informe permite:

- Navegar archivo por archivo.
- Ver l√≠neas cubiertas (verde) y no cubiertas (rojo).
- Consultar estad√≠sticas detalladas por m√≥dulo o archivo.

Puedes abrir el archivo principal con:

```
open htmlcov/index.html  # en MacOS o Linux
start htmlcov/index.html  # en Windows

```

---

### ‚úÖ Comandos √∫tiles de `coverage`

```
# Ejecutar los tests con cobertura
coverage run manage.py test

# Ver resumen de cobertura en la terminal
coverage report

# Generar informe HTML visual
coverage html

# (Opcional) Borrar informes anteriores
coverage erase

```

> `coverage` forma parte de las buenas pr√°cticas de testing en proyectos Django y contribuye a detectar errores antes de llegar a producci√≥n.





### üìù Logging en Django

El paquete `logging` es el sistema est√°ndar de Python utilizado para **depurar, monitorear y registrar eventos** durante la ejecuci√≥n de un proyecto Django. Sirve como una alternativa m√°s profesional y configurable que `print()`, tanto en desarrollo como en producci√≥n.

---

### ‚öôÔ∏è Requiere configuraci√≥n en `settings.py`

Antes de usarlo, debes tener configurado el sistema de logging en tu archivo `settings.py`. Ejemplo funcional:

```
import sys

LOGGING = {
    'version': 1,
    'handlers': {
        'console': {
            'class': 'logging.StreamHandler',
            'stream': sys.stdout,
            'formatter': 'verbose',
        },
    },
    'formatters': {
        'verbose': {
            'format': '[%(asctime)s] %(levelname)s [%(name)s] %(message)s'
        },
    },
    'root': {
        'handlers': ['console'],
        'level': 'DEBUG',
    },
}
```

Este bloque configura que todos los mensajes de nivel `DEBUG` o superior se muestren por consola con un formato claro que incluye hora, nivel y m√≥dulo origen.

### üí° ¬øC√≥mo usar `logging` para depuraci√≥n?

Una vez configurado, puedes usarlo en cualquier archivo Python de tu proyecto para imprimir mensajes seg√∫n nivel de severidad:

```
import logging
logger = logging.getLogger(__name__)

logger.debug("Inicio de funci√≥n crear_datos()")

categoria = Category.objects.create(
    name="Juegos cl√°sicos",
    description="Colecci√≥n de juegos tradicionales"
)
logger.debug(f"Categor√≠a creada: {categoria.name}")

producto = Product.objects.create(
    name="Domin√≥ profesional",
    description="Domin√≥ de alta calidad con estuche",
    price=24.90,
    stock=20,
    category=categoria
)
logger.debug(f"Producto creado: {producto.name} en categor√≠a {categoria.category.name}")
```

Este ejemplo ilustra c√≥mo insertar puntos de seguimiento detallados durante la ejecuci√≥n de operaciones comunes.

### üìä Niveles de logging disponibles

| NivelM√©todo¬øVisible si nivel = DEBUG? |                     |      |
| ------------------------------------- | ------------------- | ---- |
| `DEBUG`                               | `logger.debug()`    | ‚úÖ S√≠ |
| `INFO`                                | `logger.info()`     | ‚úÖ S√≠ |
| `WARNING`                             | `logger.warning()`  | ‚úÖ S√≠ |
| `ERROR`                               | `logger.error()`    | ‚úÖ S√≠ |
| `CRITICAL`                            | `logger.critical()` | ‚úÖ S√≠ |

> Cuanto m√°s alto el nivel, m√°s grave el evento. En desarrollo se recomienda usar `DEBUG`, en producci√≥n `WARNING` o superior.

## **üìã Pr√≥ximos Pasos**

- ‚úÖ Escribir pruebas para¬†`ProductDetailView`.
- ‚úÖ A√±adir caso de prueba para 404.
- üîú Automatizar despliegue en Render desde¬†`develop`.
- üìö Documentar instrucciones de testing en¬†`README.md`.
- üîÆ Generar datos de prueba con¬†`Faker`.
- üîê Implementar permisos m√°s finos (grupos de usuarios).

---

## üß™ Verificar modo DEBUG por CLI

Puedes comprobar si el modo `DEBUG` est√° activado con:

```
python manage.py shell -c "from django.conf import settings; print(settings.DEBUG)"
```

---

**üèÅ Estado Final**

‚úÖ¬†**App en vivo**\
‚úÖ¬†**CI activo**\
‚úÖ¬†**Flujo de desarrollo profesional**\
‚úÖ¬†**Listo para presentaci√≥n al cliente**

---

> **Preparado por:**¬†Vasil\
> **Fecha:**¬†2025-08-06

