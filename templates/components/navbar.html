{% load static i18n %}

<style>
  /* Centro del logo */
  .brand-center {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    display: flex;
    align-items: center;
    gap: .5rem;
    padding: .25rem .75rem;
    border-radius: .5rem;
    background: rgba(255, 255, 255, 0.06);
    font-weight: 600;
    white-space: nowrap;
  }
  .brand-logo {
    height: 28px; /* base */
  }
  .brand-text {
    line-height: 1.1;
  }

  /* Desktop (y tablet como desktop) */
  @media (min-width: 768px) {
    .brand-logo { height: 56px; } /* +200% vs 28px */
    .brand-center { flex-direction: row; }
  }

  /* Móvil horizontal = como desktop */
  @media (max-width: 767.98px) and (orientation: landscape) {
    .brand-logo { height: 56px; } /* +200% */
    .brand-center { flex-direction: row; }
  }

  /* Móvil vertical: texto debajo */
  @media (max-width: 767.98px) and (orientation: portrait) {
    .brand-center {
      flex-direction: column;
      gap: .25rem;
      padding: .25rem .5rem;
    }
    .brand-text {
      font-size: .875rem; /* compacto */
      display: block;     /* fuerza visibilidad */
    }
  }

  /* Popover categorías (igual que tenías) */
  .categories-popover {
    position: absolute;
    top: 100%;
    left: 0;
    margin-top: .5rem;
    z-index: 1050;
    min-width: 220px;
  }
</style>

<nav class="navbar navbar-dark bg-dark sticky-top shadow-sm py-1">
  <div class="container px-4 position-relative py-3">

    <!-- Left -->
    <button
      class="btn btn-link text-white p-0 me-2"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#categoryMenu"
      aria-controls="categoryMenu"
      aria-expanded="false"
      aria-label="{% trans 'Toggle categories' %}">
      <i class="fas fa-bars fa-lg"></i>
    </button>

    <!-- Center -->
    <a class="navbar-brand brand-center" href="{% url 'home' %}">
      <img src="{% static 'img/logo.png' %}" alt="Logo" class="brand-logo d-inline-block align-text-top">
      <span class="brand-text">Product Management</span>
    </a>

    <!-- Right -->
    <a class="nav-link text-white position-relative" href="{% url 'cart:cart_detail' %}">
      <div class="ms-auto">
        <span class="me-1"><i class="fa-solid fa-cart-shopping fa-flip-horizontal"></i></span>
        <span class="d-none d-sm-inline">{% trans "Cart" %}</span>
        {% if cart_total_items %}
          <span class="badge bg-danger position-absolute top-0 start-100 translate-middle">{{ cart_total_items }}</span>
        {% endif %}
      </div>
    </a>

    <!-- Categorías -->
    <div id="categoryMenu" class="collapse categories-popover">
      <div class="bg-dark p-3 rounded shadow">
        <ul class="list-unstyled mb-0">
          {% for cat in categories %}
            <li class="mb-2">
              <a class="text-white text-decoration-none" href="{% url 'products:product_list' %}?category={{ cat.id }}">
                {{ cat.name }}
              </a>
            </li>
          {% empty %}
            <li class="text-muted">{% trans "No categories" %}</li>
          {% endfor %}
        </ul>
      </div>
    </div>

  </div>
</nav>
